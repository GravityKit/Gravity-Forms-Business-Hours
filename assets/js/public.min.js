!function($){"use strict";var self=$.extend({lists:[],business_hours_list:[]});self.init=function(){self.build_lists(),self.setup_bindings(),$(".item_fromtime").trigger("change")},self.setup_bindings=function(){$(document).on("click",".business_hours_remove_button",self.click_remove_button),$(document).on("click",".business_hours_add_button",self.click_add_button),$(document).on("change",".item_fromtime",self.time_change)},self.time_change=function(){$(this).parents(".business_hours_item").find('.item_totime option[value="'+$(this).val()+'"]').attr("disabled","disabled").prevAll("option").attr("disabled","disabled")},self.get_list=function(id){return self.lists[id]=self.lists[id]||[]},self.click_add_button=function(e){e.preventDefault();var field_id=$(this).parents(".business_hours_item").attr("rel"),$parent=$(this).parents(".business_hours_item"),item={day:$parent.find(".item_day").val(),daylabel:$parent.find(".item_day option:selected").text(),fromtime:$parent.find(".item_fromtime").val(),fromtimelabel:$parent.find(".item_fromtime option:selected").text(),totime:$parent.find(".item_totime").val(),totimelabel:$parent.find(".item_totime option:selected").text()};return self.business_hours_list=self.get_list(field_id),self.does_exact_day_exist(item,self.business_hours_list)?(alert(GFBusinessHours.already_exists),!1):(self.business_hours_list.push(item),self.update_input_value(this),self.populate_business_hours_list(this),self.move_day_forward($parent,item),void 0)},self.move_day_forward=function($parent){var $day_field=$parent.find(".item_day"),$currently_selected_option=$day_field.find("option:selected"),$next_option=$currently_selected_option.next("option");0===$next_option.length&&($next_option=$day_field.find("option:first-child")),$day_field.val($next_option.val())},self.click_remove_button=function(e){e.preventDefault();var field_id=$(this).parents(".business_hours_item").attr("rel"),index=$(this).parents(".business_hours_list_item").index(),list_string_value=self.get_list(field_id);self.business_hours_list=list_string_value,index>=0&&(self.business_hours_list.splice(index,1),self.update_input_value(this),$(this).parents(".business_hours_list_item").remove())},self.build_lists=function(){$(".business_hours_list_item").each(function(){var $item=$(this).parents(".business_hours_item:first"),field_id=$item.attr("rel"),value=$item.find("input:first").val();self.lists[field_id]=$.parseJSON(value)})},self.populate_business_hours_list=function(obj){var $container=jQuery(obj).parents(".business_hours_item").find(".business_hours_list");$container.empty();var items=[];for(var i in self.business_hours_list)items.push('<div class="business_hours_list_item"><strong>'+self.business_hours_list[i].daylabel+"</strong>  <span>"+self.business_hours_list[i].fromtimelabel+"</span> - <span>"+self.business_hours_list[i].totimelabel+'</span><a href="#" class="business_hours_remove_button"><i class="dashicons dashicons-dismiss"></i></a></div>');$container.append(items.join(""))},self.update_input_value=function(obj){var json_string=JSON.stringify(self.business_hours_list);$(obj).parents(".business_hours_item").find("input:first").val(json_string)},self.does_exact_day_exist=function(obj,list){var i;for(i=0;i<list.length;i++)if(list[i].day===obj.day&&list[i].fromtime===obj.fromtime&&list[i].totime===obj.totime)return!0;return!1},$(self.init)}(jQuery);